{
  "kind": "build_request",
  "title": "Grant specified Internet Identity principal admin access in backend",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Ensure the Internet Identity principal `zq4an-uqz34-isqap-u5moy-4rxll-vz3ff-ndqph-gvmn5-hqe6u-o6j3v-yqe` is granted the `#admin` role in the backend access-control state so this principal can access the admin panel and perform admin-only actions (e.g., create/update products, manage news, upload logo). This must work even when no admins currently exist (i.e., bootstrap an initial admin on install/upgrade if missing).",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-10",
          "msg-11"
        ],
        "quotes": [
          "add this principal as admin :zq4an-uqz34-isqap-u5moy-4rxll-vz3ff-ndqph-gvmn5-hqe6u-o6j3v-yqe",
          "build"
        ]
      },
      "acceptanceCriteria": [
        "When logged in as principal `zq4an-uqz34-isqap-u5moy-4rxll-vz3ff-ndqph-gvmn5-hqe6u-o6j3v-yqe`, `useIsCallerAdmin()` returns true and `AdminRouteGuard` allows access to `/admin/*` routes.",
        "As principal `zq4an-uqz34-isqap-u5moy-4rxll-vz3ff-ndqph-gvmn5-hqe6u-o6j3v-yqe`, admin-only backend methods (e.g., `createProduct`, `updateProduct`, `createProductUpdate`, `updateLogo`) no longer trap with unauthorized.",
        "The change does not remove or downgrade any existing admins already stored in the canister state.",
        "On a fresh deploy with empty state, the specified principal is still able to access admin pages without needing a pre-existing admin to call `addAdmin`."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in `backend/main.mo`.",
    "Generate/modify `backend/migration.mo` only if needed to preserve/upgrade existing stable state (conditional migration policy).",
    "Do not edit files in `frontend/src/components/ui` or the immutable hook entrypoints listed in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "Implementing alternative authentication providers (only Internet Identity).",
    "Adding new admin UX flows beyond making the specified principal an admin in the backend.",
    "Diagnosing unrelated deployment pipeline errors unless directly required to make the admin change take effect."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}